exercice:

The second version, controller2, is intended for a pedestrian crossing. There
are three lights for traffic (green, amber, and red) and also two lights for the
pedestrian (wait and walk). There are two input bits: a reset pushbutton, and
a walkRequest which is 1 when a pedestrian presses the Walk pushbutton.
Normally the outputs indicate green/wait. However, when the walkRequest
button is pressed, the traffic light changes to amber, and then the traffic light
changes to red and the pedestrian light turns to walk for three clock cycles. Then
the system displays amber/wait and then returns to its normal state green/wait.

walkCount (16b), this is 16b counter of the number of times walkrequest is pressed. not implementing it just yet.

Analyse: 
3 lights for traffic:
  - Green
  - amber
  - red

  2 lights for pedestrians:
    - Wait
    - Walk

two imputs :
  - reset pushbutton
  - walkRequest ( pedestrian button)

outputs : green, amber, red, wait, walk, walkCount(16b)

STATES
if reset signal  =1 enter green

Green State:
  outputs: green wait
  if walkRequest = 1 then next = AmberBeforeW 
  else next = Green


Amber State:
  -- During AmberBeforeW and AmberAfter, walkRequest is ignored.
  IF amberBeforeW
    outputs : amber wait
    next state: Red
  IF amberAfter 
    outputs: amber wait
    next state: Green
  -- walkRequest increments walkCount but has no effect on the FSM

Red State:
  outputs: red walk
  count 3 cycles (will adapt the 3bit counter from first part circuit)
  next: amberAfter
  -- walkRequest increments walkCount but has no effect on the FSM





walkCount is a 16-bit register updated independently of the controller state.

On a clock where reset = 1, walkCount becomes 0.

On a clock where walkRequest = 1 (regardless of the current state), walkCount increments by 1.

walkCount does not influence state transitions under Policy A.

Policy A — Ignore further requests during the whole cycle

This is the simplest and most common.
Rationale: pedestrians are already crossing; we don’t need to queue a second crossing immediately.

Consequences:

walkRequest has meaning only in the Green state.

No queueing, no repeats until system returns to Green.